{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"page.cc655386.js","sourceRoot":"..","sourcesContent":["const validityErrorMessages = {\r\n    tooShort: 'URL too short (at least 3 characters)',\r\n    allreadyUsed: 'This URL is allready in use ðŸ˜’',\r\n    unacceptableChars: 'Only use the chars a-z, A-Z, 0-9, -, _'\r\n}\r\n\r\n\r\n\r\nwindow.onload = () => {\r\n    console.log('TS for shortyRS loaded.')\r\n\r\n    // set custom short url prefix display\r\n    const prefixDisplay = document.getElementById('url-prefix')\r\n    prefixDisplay.textContent = `${location.host}/`\r\n    \r\n    const useCustomUrlButton: HTMLInputElement = <HTMLInputElement> document.getElementById('provide-short-url')\r\n    const customUrlInput: HTMLInputElement = <HTMLInputElement> document.getElementById('short-url')\r\n    const validityInfo: HTMLParagraphElement = <HTMLParagraphElement> document.getElementById('validity-message')\r\n\r\n    validityInfo.style.display = 'none'\r\n\r\n    async function validate() {\r\n        const url = customUrlInput.value\r\n        if (url.length < 3) {\r\n            validityInfo.style.display = 'block'\r\n            validityInfo.textContent = validityErrorMessages.tooShort\r\n            customUrlInput.classList.remove('valid')\r\n            customUrlInput.classList.add('invalid')\r\n            return\r\n        }\r\n\r\n        if (!/^[\\w|\\d|\\-|_]*$/g.test(url)) {\r\n            validityInfo.style.display = 'block'\r\n            validityInfo.textContent = validityErrorMessages.unacceptableChars\r\n            customUrlInput.classList.remove('valid')\r\n            customUrlInput.classList.add('invalid')\r\n            return\r\n        }\r\n\r\n        let res = await fetch(`/free?short=${url}`)\r\n        if (!res.ok) {\r\n            validityInfo.style.display = 'block'\r\n            validityInfo.textContent = validityErrorMessages.allreadyUsed\r\n            customUrlInput.classList.remove('valid')\r\n            customUrlInput.classList.add('invalid')\r\n            return\r\n        }\r\n\r\n        validityInfo.style.display = 'none'\r\n        customUrlInput.classList.add('valid')\r\n        customUrlInput.classList.remove('invalid')\r\n    }\r\n\r\n    customUrlInput.oninput = validate\r\n    \r\n    useCustomUrlButton.onchange = evt => {\r\n        const use = useCustomUrlButton.checked\r\n        customUrlInput.disabled = !use\r\n        if(use) {\r\n            // validate\r\n            validate()\r\n        }\r\n        else {\r\n            customUrlInput.classList.remove('valid', 'invalid')\r\n        }\r\n\r\n        \r\n    }\r\n}"]}